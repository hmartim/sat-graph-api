get:
  tags:
    - "Structural Navigation Actions"
  summary: "Retrieves the hierarchy (all descendant IDs) for an ItemType in the taxonomy."
  operationId: "getItemTypeHierarchy"
  description: |
    Returns a flat list of all descendant ItemType IDs for a given ItemType node in the
    poly-hierarchical taxonomy, including the requested ItemType ID itself.

    ### Use Case: Hierarchical Filtering

    This endpoint is essential for search operations with type-based filtering. When a user
    specifies a high-level ItemType (e.g., "Normative Component"), the agent needs to include
    all subtypes (Article, Paragraph, Clause, etc.) in the search filter.

    **Example Workflow:**
    ```
    User: "Find all normative components about social security"

    Agent:
    1. Resolve "normative components" → item_type_id: "normative-component"
    2. Call getItemTypeHierarchy("normative-component")
       → ["normative-component", "article", "paragraph", "clause", ...]
    3. Call searchItems(text="social security", type_ids=[...all descendants...])
    ```

    ### Discussion

    Without this endpoint, agents would need to recursively traverse the taxonomy tree
    with multiple `getItemType` calls, creating inefficiency and complexity. This single
    endpoint provides the complete descendant set in one request.

    The returned list is unordered and includes the root ItemType ID itself, making it
    ready to use directly in filter parameters.

  security:
    - ApiKeyAuth: []

  parameters:
    - name: itemTypeId
      in: path
      required: true
      description: "The unique ID of the ItemType whose descendants should be retrieved."
      schema:
        $ref: '#/components/schemas/ID'
      example: "item-type:normative-component"

  responses:
    '200':
      description: "A list of ItemType IDs (strings) within the hierarchy, including the root ItemType itself."
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/ID'
          example:
            - "item-type:normative-component"
            - "item-type:article"
            - "item-type:paragraph"
            - "item-type:clause"
            - "item-type:item"
            - "item-type:subitem"
    '400':
      $ref: '#/components/responses/BadRequest'
    '401':
      $ref: '#/components/responses/Unauthorized'
    '403':
      $ref: '#/components/responses/Forbidden'
    '404':
      $ref: '#/components/responses/NotFound'
