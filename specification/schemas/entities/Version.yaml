#
# OpenAPI 3.x Schema for the 'Version' Data Model
#
# This file defines the schema for the 'Version' object, which represents a
# specific, time-bound, and language-agnostic version of an 'Item'.
#
# In the SAT-Graph ontology, this corresponds to the 'Temporal Version' (TV)
# or 'Component Temporal Version' (CTV). It acts as a "temporal snapshot" of
# an item's semantic state and its hierarchical position, but it does not
# contain the textual content itself. The text is provided by one or more
# 'TextUnit' objects that link to this Version.
#
# IMPLEMENTATION NOTE: While the academic paper's conceptual model includes
# 'parent' and 'children' properties for didactic clarity, this API specification
# separates structural navigation into dedicated endpoints for efficiency and
# correct temporal semantics:
# - A Version can be reused by multiple parent Versions over time (e.g., an
#   unchanged paragraph may be part of 100+ brazilian federal Constitution amendment versions)
# - GET /versions/{versionId}/parent?at={timestamp} returns the contextually
#   correct parent for a specific point in time
# - GET /versions/{versionId}/children returns immediate structural children
#
type: object
description: >
  Represents a specific, time-bound version of an Item (a TV/CTV). It captures
  the semantic state and structural position of an item at a specific point in time,
  but is language-agnostic and contains no direct textual content.
required:
  - id
  - item_id
  - validity_interval
properties:
  id:
    $ref: '../core/ID.yaml'
    description: "A unique identifier for this specific version instance."
    example: "urn:lex:br:federal:constituicao:1988@1988-10-05"
  uri:
    type: string
    nullable: true
    description: >-
      The canonical URI/URN for this Version. Typically extends the Item's URI
      with temporal information (e.g., @2020-01-15 suffix). This enables precise
      temporal citations and version tracking across systems, providing stable
      identification that persists even if the surrogate ID changes.
    minLength: 1
    example: "urn:lex:br:federal:constituicao:1988-10-05;art5@2020-01-15"
  item_id:
    $ref: '../core/ID.yaml'
    description: "The ID of the timeless 'Item' this object is a version of."
    example: "urn:lex:br:federal:constituicao:1988"
  validity_interval:
    $ref: '../core/TimeInterval.yaml'
    description: "The time interval during which this version was legally valid."
  metadata:
    $ref: '../core/JSON.yaml'
    nullable: true
    description: >-
      A flexible field for any valid JSON data specific to this version.