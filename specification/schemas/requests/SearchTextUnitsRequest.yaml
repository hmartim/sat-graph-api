type: object
description: |
  The request body for the searchTextUnits operation.

  **Parameter Modes (Mutually Exclusive):**

  **Mode 1: Explicit Version Scope**
  - Use `version_ids` to search within a specific set of versions
  - `item_ids`, `theme_ids`, and `timestamp` are ignored when `version_ids` is provided

  **Mode 2: Conceptual Scope with Temporal Resolution**
  - Use `item_ids` and/or `theme_ids` to define scope
  - Use `timestamp` to constrain temporally (defaults to "now" if omitted)
  - `version_ids` must be omitted in this mode

  You cannot mix `version_ids` with `item_ids`/`theme_ids`/`timestamp`. Choose one mode per request.
properties:
  version_ids:
    type: array
    items:
      $ref: '../core/ID.yaml'
    description: |
      **Mode 1: Explicit Version Scope**
      A list of specific Version IDs to search within.
      When provided, `item_ids`, `theme_ids`, and `timestamp` are ignored.
  item_ids:
    type: array
    items:
      $ref: '../core/ID.yaml'
    description: |
      **Mode 2: Conceptual Scope**
      A list of Item IDs to define the structural scope.
      Cannot be used with `version_ids`.
  theme_ids:
    type: array
    items:
      $ref: '../core/ID.yaml'
    description: |
      **Mode 2: Conceptual Scope**
      A list of Theme IDs to define the thematic scope.
      Cannot be used with `version_ids`.
  metadata_filter:
    $ref: '../common/MetadataFilter.yaml'
  timestamp:
    type: string
    format: date-time
    description: |
      **Mode 2: Conceptual Scope**
      A UTC date-time to constrain the search temporally. Defaults to 'now' if omitted.
      Cannot be used with `version_ids`.
  semantic_query:
    type: string
    description: "The natural language query string for vector search."
  lexical_query:
    type: string
    description: "Keywords or phrases for a full-text syntactic search."
  language:
    type: string
    description: "The IETF BCP 47 language code for the content."
    example: "pt-BR"
  aspects:
    type: array
    items:
      type: string
    default: ["canonical"]
    description: "A list of textual aspects to search within (e.g., 'canonical', 'summary')."
  top_k:
    type: integer
    format: int32
    default: 10
    minimum: 1
    description: "The maximum number of results to return."
  datasources:
    $ref: '../common/DatasourcesSchema.yaml'
    description: "Optional. Scopes the search to a specific list of granted datasources."
